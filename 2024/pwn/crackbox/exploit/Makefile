.PHONY: all solve

all: solve

solve: solve.c solve.S
	gcc \
	-o solve -O0 \
	-masm=intel -march=native \
	-nostdlib -nostartfiles \
	-fno-builtin -fno-stack-protector \
	-ffreestanding -pie \
	-Wl,--oformat=binary -Wl,-T,linker.ld \
	solve.c solve.S
	# zig cc solve.c solve.S -target x86_64-linux-musl -o solve -static -masm=intel -s
	# python3 -c 'data = open("solve", "rb").read(); open("solve", "wb").write(data.ljust(0x100000, b"\x00"))'